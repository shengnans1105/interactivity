{
    "collab_server" : "",
    "contents" : "---\ntitle: \"Plotly\"\nauthor: \"Shengnan Sun\"\ndate: \"2017/11/1\"\noutput: html_document\n---\n\n```{r setup, include=FALSE}\nknitr::opts_chunk$set(echo = TRUE)\n\nlibrary(tidyverse)\nlibrary(janitor)\nlibrary(stringr)\nlibrary(forcats)\nlibrary(viridis)\n\nlibrary(plotly)\n```\n\n## Dataset\n\n```{r}\nairbnb_data = read_csv(\"./data/nyc_airbnb.zip\") %>%\n  clean_names() %>%\n  mutate(rating = review_scores_location / 2) %>%\n  select(boro = neighbourhood_group, neighbourhood, rating, price, room_type,\n         latitude, longitude) %>%\n  filter(boro == \"Manhattan\",\n         room_type == \"Entire home/apt\",\n         price %in% 100:400)  \n```\n\n## Plotly Scatterplot\n\n```{r}\nairbnb_data %>%\n  mutate(text_label = str_c(\"Price: $\", price, '\\nRating: ', rating)) %>% \n  plot_ly(x = ~longitude, y = ~latitude, type = \"scatter\", mode = \"markers\",\n          alpha = 0.5, \n          color = ~price,\n          text = ~text_label)\n```\n\n## Plotly boxplot\n\n```{r}\nairbnb_data %>%\n  plot_ly(x = ~neighbourhood, y = ~price, type = \"box\")\n\nairbnb_data %>%\n  mutate(neighbourhood = fct_reorder(neighbourhood, price)) %>%\n  plot_ly(x = ~neighbourhood, y = ~price, type = \"box\")\n\nairbnb_data %>%\n  mutate(neighbourhood = fct_reorder(neighbourhood, price)) %>%\n  plot_ly(color = ~neighbourhood, y = ~price, type = \"box\", colors = \"Set2\")\n```\n\n## Plotly bar chart\n\n```{r}\nairbnb_data %>% \n  count(neighbourhood) %>% \n  mutate(neighbourhood = fct_reorder(neighbourhood, n)) %>% \n  plot_ly(x = ~neighbourhood, y = ~n, color = ~neighbourhood, type = \"bar\")\n```\n\n## ggplotly\n\n```{r}\nscatter_ggplot = airbnb_data %>%\n  ggplot(aes(x = longitude, y = latitude, color = price)) +\n  geom_point(alpha = 0.25) +\n  scale_color_viridis() +\n  coord_cartesian() +\n  theme_classic()\n\nggplotly(scatter_ggplot)\n```\n\n",
    "created" : 1509557025726.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "2706214367",
    "id" : "7D50EE47",
    "lastKnownWriteTime" : 1509558686,
    "last_content_update" : 1509558686797,
    "path" : "~/Desktop/DSI/interactivity/interactivity.Rmd",
    "project_path" : "interactivity.Rmd",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_markdown"
}